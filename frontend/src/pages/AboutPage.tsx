import { useState, useEffect } from 'react'
import { Helmet } from 'react-helmet-async'
import { motion } from 'framer-motion'
import { useSettingsStore } from '../store/settingsStore'
import '../styles/pages/AboutPage.css'

interface CommitteeMember {
  id: number
  name: string
  position: string
  photo_url: string
}

interface Committee {
  id: number
  name: string
  description: string
  members: CommitteeMember[]
}

const DEFAULT_HERO_TITLE = 'О соревнованиях EUROBOT'
const DEFAULT_HERO_SUBTITLE = 'Международные молодёжные робототехнические соревнования, развивающие инженерное мышление с 1998 года'

const DEFAULT_HISTORY = `<p>Международные молодежные робототехнические соревнования EUROBOT – это открытый чемпионат мобильных роботов, созданных молодёжными командами со всего мира. Соревнования EUROBOT (<a href="https://www.eurobot.org" target="_blank" rel="noopener noreferrer">www.eurobot.org</a>), организованные в 1998 году как кубок молодежных робототехнических команд Франции, в настоящее время приобрели международный статус. Соревнования открыты для молодых людей со всего мира. В настоящее время движение EUROBOT объединяет 450 команд из 30 стран Европы, Азии, Америки и Африки. Прикладной чемпионат молодых разработчиков EUROBOT входит в тройку крупнейших мировых робототехнических соревнований. Важным отличием формата EUROBOT от других робототехнических соревнований является отсутствие ограничений на использование платформ и комплектующих роботов, что позволяет командам с различным опытом участия и уровнем бюджет, но оригинальными техническими решениями, соревноваться на равных и участвовать в образовательном проекте EUROBOT.</p>

<p>В настоящее время становится ясно, что новые современные высокотехнологичные науки требуют новых форм и технологий в их изучении и преподавании. В мехатронике и робототехнике такими инновационными формами стали соревнования робототехнических команд. Для популяризации робототехнических соревнований в странах участницах были организованы национальные комитеты, которые, в 2003 году образовали Европейскую Ассоциацию EUROBOT. Ежегодно меняющийся регламент уникальной образовательной программы EUROBOT привлекает каждый год все новые команды. Чтобы претендовать на победу в этом престижном мировом турнире, нужно стать лучшим в национальном этапе. По техническому регламенту соревнований новые правила объявляются для участников в октябре. В течение 6 месяцев молодые разработчики готовят своих роботов для участия в соревнованиях. Национальный этап с участием зарубежных наблюдателей и представителей Ассоциации EUROBOT выявляет три лучшие команды, которые выходят в международный Финал.</p>

<p>В соревнованиях EUROBOT принимают участие команды двух лиг: высшей, в которой возраст участников от 18 до 30 лет, команды этой лиги разрабатывают полностью автономных мобильных роботов, и младшей, юниорской лиги, возраст участников от 7 до 18 лет, создающих дистанционно управляемых роботов.</p>

<p>Регламент EUROBOT и требования к роботам меняются каждый год, и каждое очередное соревнование рождает новые идеи и свежие решения. Роботы решают важные практические задачи на игровом полигоне в парном поединке, который длится 100 секунд. Ежегодно на соревнованиях проходят проверку новые идеи и свежие конструкторские решения. В разные годы роботы уже решали задачи, связанные с уборкой мусора, покорением Марса и Луны, строительством, сбором урожая, сбором ресурсов, кинопроизводством, играли в шахматы. На модельных задачах команды решают те проблемы, с которыми столкнутся будущие исследовательские и городские сервисные роботы.</p>

<p>Это сбор и очистка ресурсов, строительство зданий, эффективное взаимодействие одновременно нескольких роботов в ограниченном пространстве, оценка роботом своих действий. Правила соревнований нацеливают команды на созидание и обмен опытом, как во время соревнований, так и во время подготовки к ним. Инновационная направленность задач, ставящихся перед молодыми разработчиками, ориентирует их на решение важных практических проблем современности. Сложные и интересные в научном плане задачи, возникающие в ходе подготовки к соревнованиям, вызывают постоянно растущий интерес к EUROBOT со стороны многочисленных групп разработчиков, и внимание со стороны больших промышленных компаний, выступающих и лидерами разработок, и спонсорами.</p>

<p>Робототехнические соревнования дают возможность молодым людям раскрыть свое техническое воображение, предоставляют дискуссионную площадку для обмена идеями, технологиями, советами и инженерными знаниями в дружеской атмосфере. Созидательность в основах и на границах дисциплин помогает в будущих профессиональных разработках участников, вне зависимости от тематики их дальнейших исследований.</p>

<p>Робототехника – это комплексная дисциплина, сочетающая в себе достижения механики, электроники, программирования. Каждый спроектированный и построенный робот является плодом коллективных усилий специалистов разного профиля, результатом слаженной командной работы. Роботы должны автономно: управлять движением, решать навигационные задачи, активно работать с геометрией и цветом объектов, иметь средства работы с неориентированными объектами, уметь выбирать объекты из «навала», уметь раскладывать объекты в заданные контейнеры.</p>

<p>Все эти задачи имеют однозначную «интеллектуальную окраску», что подчеркивает их актуальность и новизну.</p>

<p>Каждый год EUROBOT привлекает все новые студенческие и школьные команды благодаря удачному формату соревнований, интересной идее, динамичности матчей, интересу со стороны образовательных учреждений, спонсоров и просто зрителей. Участники должны создать команду. Команды могут быть сформированы студентами, независимыми клубами или некоммерческими организациями.</p>

<p>Несмотря на безусловную научно-образовательную направленность, EUROBOT не является мероприятием исключительно для профессионалов. Это увлекательнейшее спортивное шоу, широко освещаемое в прессе и на европейских телеканалах. Популярность соревнований привлекает высокотехнологические компании, которые спонсируют проведение турнира, подготовку национальных команд, а также создание национальных лиг EUROBOT. Не случайно постоянную поддержку командам EUROBOT оказывают такие компании, как RENAULT, SIEMENS и др.</p>

<p>Сегодня становится ясно, что современные высокотехнологичные науки требуют новых форм в их изучении и преподавании. За время существования EUROBOT зарекомендовал себя как уникальная инновационная образовательная технология, направленная на поиск, подготовку и поддержку высококвалифицированных научно-инженерных кадров с практическим опытом командной работы на стыке перспективных областей знаний.</p>`

const DEFAULT_RUSSIA = `<p>Россия участвует в международных соревнованиях начиная с 2005 года. Российский Национальный Организационный Комитет международных молодежных робототехнических соревнований EUROBOT был создан в 2006 году коллективом сотрудников ведущих Российских ВУЗов, имевших большой опыт участия в научно-исследовательских и образовательных проектах в области робототехники, и весной 2007 года впервые прошел Российский этап соревнований. И вот уже более 10 лет отбор на российский финал открыт для команд из любого региона нашей страны.</p>

<p>В 2007 и 2008 годах НОК ЕВРОБОТ совместно с ЦНИИ РТК в рамках выставки «Мехатроника и робототехника» международного форума «Российский промышленник» в Санкт-Петербурге провели международный молодежный робототехнический турнир «Северная звезда» по регламентам EUROBOT.</p>

<p>В 2011 году в России, на астраханской земле, впервые в истории прошел Финал международных молодежных робототехнических соревнований EUROBOT World Cup 2011. В Астрахани встретились более 500 участников из 24 стран мира. Масштабность, дружеская атмосфера и спортивный дух стали неотъемлемыми спутниками соревнований EUROBOT в России. Это крупное инновационное мероприятие прошло при мощной федеральной поддержке: в частности, администрации Президента Российской Федерации и фонда «Сколково».</p>

<p>С 2009 года соревнования Российского этапа проводились на площадках ведущих федеральных вузов России: МГТУ им. Н.Э. Баумана, НИТУ «МИСиС», НИУ «МЭИ», МГУПИ (ныне РТУ-МИРЭА), СКОЛТЕХ, БФУ им. И. Канта, ДГТУ. В 2013 году создание на территории столицы Центров технологической поддержки образования (ЦТПО) обеспечило новые возможности развития формата. Подготовка команд и этапы соревнований прошли на базе ЦТПО НИУ «МЭИ», МГТУ «СТАНКИН», НИТУ «МИСиС».</p>

<p>В 2018 году содействие в проведении Российского финала соревнований в Донском государственном техническом университете оказала крупнейшая технологическая компания России — Сбербанк. Также благодаря поддержке Сбербанка и Фонда президентских грантов лучшие российские команды получили возможность бесплатно отправиться на международный финал во Францию, где они соревновались с ведущими командами Европы. В 2019 году Сбербанк стал Генеральным партнером Национального этапа международных робототехнических соревнований EUROBOT 2019. Во многом, благодаря поддержке ПАО Сбербанк, российский этап международных молодежных робототехнических соревнований EUROBOT получил высокую оценку Министерства просвещения Российской Федерации.</p>

<p>Российский этап соревнований EUROBOT вошел в перечень олимпиад и иных интеллектуальных и (или) творческих конкурсов, мероприятий, направленных на развитие интеллектуальных и творческих способностей, способностей к занятиям физической культурой и спортом, интереса к научной (научно-исследовательской), инженерно-технической, изобретательской, творческой, физкультурно-спортивной деятельности, а также на пропаганду научных знаний, творческих и спортивных достижений (Приказ Минпросвещения РФ от 9 октября 2018 №197).</p>

<p>Важно отметить, что каждая новая команда, создаваемая в России – это еще один шаг к формированию современной высокоинтеллектуальной образовательной среды. Это означает, что молодежь получает возможность активных самостоятельных занятий, учится использовать полученные знания в практической плоскости, осваивает современные технологии. Пропаганда робототехнического движения в стране, расширение его географии, создание всех новых робототехнических команд является основной задачей НОК ЕВРОБОТ. Всего с 2007 года более 20 000 молодых разработчиков робототехнических систем приняли участие в мероприятиях движения EUROBOT в России. Команды представляли Москву, Калининград, Казань, Пензу, Новосибирск, Иркутск, Красноярск, Краснодар, Якутск, Санкт-Петербург, Владимир, Саратов, Ростов-на-Дону, Астрахань, Оренбург, Уфу, Екатеринбург, Омск, Ухту, Самару, Мурманск, Сургут, Петрозаводск. Кроме того, национальный этап EUROBOT 2018 был открытым – в нем приняла участие команда из Белоруссии.</p>

<p>Привлечение отечественных инновационных предприятий и лабораторий к спонсированию школьных и студенческих команд позволит создать систему «социальных лифтов»: школьник – студент ВУЗа – инженер высокотехнологической компании. Демонстрируемые в рамках соревнований интересные технические решения в скором будущем войдут в практику работы научных центров и крупных компаний не только нашей страны, но и всего мира.</p>

<p>В настоящее время в стране взят курс на инновационное развитие: ученые, конструкторы, инженеры, программисты ведут исследования и разработки в приоритетных высокотехнологичных отраслях науки с тем, чтобы внедрение этих идей способствовало постепенной модернизации российской экономики, превращение ее в одну из ведущих и максимально конкурентоспособных экономик мира.</p>

<p>Поэтому создание комфортных условий для развития высокоинтеллектуальной молодежной среды, а именно такая цель стоит перед организаторами этого робототехнического турнира, является и важнейшей государственной задачей.</p>`

export default function AboutPage() {
  const { settings } = useSettingsStore()
  const [committees, setCommittees] = useState<Committee[]>([])

  useEffect(() => {
    if (settings.about_goals) {
      try {
        const parsed = JSON.parse(settings.about_goals as string)
        if (Array.isArray(parsed)) {
          setCommittees(parsed)
        }
      } catch (error) {
        console.error('Failed to parse committees:', error)
      }
    }
  }, [settings.about_goals])

  const heroTitle = (settings.about_hero_title as string)?.trim() || DEFAULT_HERO_TITLE
  const heroSubtitle = (settings.about_hero_subtitle as string)?.trim() || DEFAULT_HERO_SUBTITLE
  const historyHtml = (settings.about_history as string)?.trim() || DEFAULT_HISTORY
  const russiaHtml = (settings.about_russia as string)?.trim() || DEFAULT_RUSSIA

  return (
    <>
      <Helmet>
        <title>О Евробот — Евробот Россия</title>
        <meta name="description" content="История и цели соревнований Евробот. Узнайте о международном движении EUROBOT и российском этапе." />
      </Helmet>

      {/* Hero секция */}
      <div className="about-hero">
        <div className="container-hero-about">
          <motion.h1
            className="about-hero-title"
            initial={{ opacity: 0, y: -20 }}
            animate={{ opacity: 1, y: 0 }}
            transition={{ duration: 0.5 }}
          >
            {heroTitle}
          </motion.h1>
          <motion.p
            className="about-hero-subtitle"
            initial={{ opacity: 0, y: 10 }}
            animate={{ opacity: 1, y: 0 }}
            transition={{ duration: 0.5, delay: 0.15 }}
          >
            {heroSubtitle}
          </motion.p>
        </div>
      </div>

      {/* Евробот в мире */}
      <section className="about-section">
        <div className="about-section-container">
          <motion.div
            initial={{ opacity: 0, x: -20 }}
            whileInView={{ opacity: 1, x: 0 }}
            viewport={{ once: true }}
            className="about-section-content"
          >
            <h2 className="about-section-title">ЕВРОБОТ В МИРЕ</h2>
            <div className="about-prose" dangerouslySetInnerHTML={{ __html: historyHtml }} />
          </motion.div>
        </div>
      </section>

      {/* Евробот в России */}
      <section className="about-section about-section-alt">
        <div className="about-section-container">
          <motion.div
            initial={{ opacity: 0, x: 20 }}
            whileInView={{ opacity: 1, x: 0 }}
            viewport={{ once: true }}
            className="about-section-content"
          >
            <h2 className="about-section-title">ЕВРОБОТ В РОССИИ</h2>
            <div className="about-prose" dangerouslySetInnerHTML={{ __html: russiaHtml }} />
          </motion.div>
        </div>
      </section>

      {/* Комитеты и экспертный совет */}
      {committees.length > 0 && (
        <section className="about-committees">
          <div className="about-committees-container">
            {committees.map((committee, index) => (
              <motion.div
                key={committee.id}
                initial={{ opacity: 0, y: 30 }}
                whileInView={{ opacity: 1, y: 0 }}
                viewport={{ once: true }}
                transition={{ delay: index * 0.1 }}
                className="about-committee-card"
              >
                <div className="about-committee-header">
                  <h2 className="about-committee-name">{committee.name}</h2>
                </div>

                {committee.description && (
                  <div className="about-committee-description">
                    <p>{committee.description}</p>
                  </div>
                )}

                {committee.members.length > 0 && (
                  <div className="about-committee-members">
                    <div className="about-members-grid">
                      {committee.members.map((member) => (
                        <div key={member.id} className="about-member-item">
                          <div className="about-member-photo-container">
                            {member.photo_url ? (
                              <img
                                src={member.photo_url}
                                alt={member.name}
                                className="about-member-photo"
                                onError={(e) => {
                                  e.currentTarget.style.display = 'none'
                                  const placeholder = e.currentTarget.nextElementSibling as HTMLElement
                                  if (placeholder) placeholder.style.display = 'flex'
                                }}
                              />
                            ) : null}
                            <div
                              className="about-member-placeholder"
                              style={{ display: member.photo_url ? 'none' : 'flex' }}
                            >
                              {member.name.split(' ').map(n => n[0]).join('').toUpperCase().slice(0, 2)}
                            </div>
                          </div>
                          <div className="about-member-info">
                            <h3 className="about-member-fullname">{member.name}</h3>
                            <p className="about-member-position">{member.position}</p>
                          </div>
                        </div>
                      ))}
                    </div>
                  </div>
                )}
              </motion.div>
            ))}
          </div>
        </section>
      )}
    </>
  )
}
